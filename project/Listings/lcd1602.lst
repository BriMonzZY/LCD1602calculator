C51 COMPILER V9.60.0.0   LCD1602                                                           03/21/2021 15:45:43 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE LCD1602
OBJECT MODULE PLACED IN ..\output\lcd1602.obj
COMPILER INVOKED BY: D:\app\keilC51\C51\BIN\C51.EXE ..\source_files\lcd1602.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEN
                    -D PRINT(.\Listings\lcd1602.lst) TABS(2) OBJECT(..\output\lcd1602.obj)

line level    source

   1          #include "config.h"
*** ERROR C141 IN LINE 4 OF ..\source_files\app.h: syntax error near 'keyvalue', expected ')'
*** ERROR C141 IN LINE 6 OF ..\source_files\lcd1602.h: syntax error near '8', expected ')'
*** ERROR C141 IN LINE 7 OF ..\source_files\lcd1602.h: syntax error near 'x', expected ')'
*** ERROR C141 IN LINE 8 OF ..\source_files\lcd1602.h: syntax error near 'x', expected ')'
   2          
   3          
   4          
   5          /**
   6           * @brief 判断液晶繁忙
   7           * 
   8           * @param   无
   9           * @return  无 
  10           */
  11          void Read_Busy()
  12          {
  13   1        uint8 busy;
  14   1        LCD1602_DB = 0xff;//复位数据总线
  15   1        LCD1602_RS = 0;   //拉低RS
  16   1        LCD1602_RW = 1;   //拉高RW读
  17   1        do
  18   1        {
  19   2          LCD1602_EN = 1;//使能EN
  20   2          busy = LCD1602_DB;//读回数据
  21   2          LCD1602_EN = 0;  //拉低使能以便于下一次产生上升沿
  22   2        }while(busy & 0x80); //判断状态字BIT7位是否为1，为1则表示忙，程序等待
  23   1      }
  24          
  25          
  26          
  27          /**
  28           * @brief 写命令
  29           * 
  30           * @param   cmd
  31           * @return  无 
  32           */
  33          void LCD1602_Write_Cmd(uint8 cmd)
  34          {
  35   1        Read_Busy();   //判断忙，忙则等待
  36   1        LCD1602_RS = 0;  //选择为写命令
  37   1        LCD1602_RW = 0; //模式为写
  38   1        LCD1602_DB = cmd;//写入命令
  39   1        LCD1602_EN = 1;  //拉高使能端 数据被传输到LCD1602内
  40   1        LCD1602_EN = 0;  //拉低使能以便于下一次产生上升沿
  41   1      }
  42          
  43          
  44          /**
  45           * @brief 写数据
  46           * 
  47           * @param   dat 
  48           * @return  无 
  49           */
  50          void LCD1602_Write_Dat(uint8 dat)
C51 COMPILER V9.60.0.0   LCD1602                                                           03/21/2021 15:45:43 PAGE 2   

  51          {
  52   1        Read_Busy();  //判断忙，忙则等待
  53   1        LCD1602_RS = 1; //选择为写数据
  54   1        LCD1602_RW = 0; //模式为写
  55   1        LCD1602_DB = dat; //写入8位数据
  56   1        LCD1602_EN = 1;   //拉高使能端 数据被传输到LCD1602内
  57   1        LCD1602_EN = 0;   //拉低使能以便于下一次产生上升沿
  58   1      }
  59          
  60          
  61          /**
  62           * @brief 清屏
  63           * 
  64           * @param   无 
  65           * @return  无 
  66           */
  67          void LCD1602_Clear_Screen()
  68          {
  69   1        LCD1602_Write_Cmd(0x01);
  70   1      }
  71          
  72          
  73          /**
  74           * @brief 打开光标闪烁效果
  75           * 
  76           * @param  无
  77           * @return 无 
  78           */
  79          void LCD1602_Open_Cursor()
  80          {
  81   1        LCD1602_Write_Cmd(0x0F);
  82   1      }
  83          
  84          
  85          
  86          /**
  87           * @brief 关闭光标显示
  88           * 
  89           * @param   无
  90           * @return  无 
  91           */
  92          void LCD1602_Close_Cursor()
  93          {
  94   1        LCD1602_Write_Cmd(0x0C);
  95   1      }
  96          
  97          
  98          
  99          /**
 100           * @brief Get the year object
 101           * 
 102           * @param x
 103           * @param y
 104           * @return  无
 105           */
 106          void LCD1602_Set_Cursor(uint8 x, uint8 y)
 107          {
*** ERROR C236 IN LINE 107 OF ..\source_files\lcd1602.c: '_LCD1602_Set_Cursor': different length of parameter lists
 108   1        if(y) x |= 0x40;
 109   1        x |= 0x80;
 110   1        LCD1602_Write_Cmd(x);
 111   1      }
C51 COMPILER V9.60.0.0   LCD1602                                                           03/21/2021 15:45:43 PAGE 3   

 112          
 113          
 114          /**
 115           * @brief 显示一个字符
 116           * 
 117           * @param   x   要显示的横坐标取值0-40
 118           * @param   y   要显示的行坐标取值0-1（0为第一行,1为第二行）
 119           * @param   dat 需要显示的数据以ASCLL形式显示
 120           * @return  无 
 121           */
 122          void LCD1602_Dis_OneChar(uint8 x, uint8 y, uint8 dat)
 123          {
*** ERROR C236 IN LINE 123 OF ..\source_files\lcd1602.c: '_LCD1602_Dis_OneChar': different length of parameter lists
 124   1        LCD1602_Set_Cursor(x, y);//设置RAM起始位置
 125   1        LCD1602_Write_Dat(dat);  //写入一个字节的数据 
 126   1      }
 127          
 128          
 129          
 130          
 131          /**
 132           * @brief 显示字符串
 133           * 
 134           * @param   x
 135           * @param   y
 136           * @return  无
 137           */
 138          void LCD1602_Dis_Str(uint8 x, uint8 y, uint8 *str)
 139          {
*** ERROR C236 IN LINE 139 OF ..\source_files\lcd1602.c: '_LCD1602_Dis_Str': different length of parameter lists
 140   1        LCD1602_Set_Cursor(x, y);//设置RAM起始位置
 141   1        while(*str != '\0')      //写入字符串数据
 142   1        {
 143   2          LCD1602_Write_Dat(*str++);
 144   2        }
 145   1      }
 146          
 147          
 148          /**
 149           * @brief 初始化LCD
 150           * 
 151           * @param   无
 152           * @return  无
 153           */
 154          void Init_LCD1602()
 155          {
 156   1        LCD1602_Write_Cmd(0x38); // 设置16*2显示，5*7点阵，8位数据接口
 157   1        LCD1602_Write_Cmd(0x0c); //开显示,关闭光标
 158   1        LCD1602_Write_Cmd(0x06); //读写一字节后地址指针加1
 159   1        LCD1602_Write_Cmd(0x01); // 清屏
 160   1      }

C51 COMPILATION COMPLETE.  0 WARNING(S),  7 ERROR(S)
